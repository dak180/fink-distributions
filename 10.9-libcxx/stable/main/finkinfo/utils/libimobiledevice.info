Package: libimobiledevice
Version: 1.3.0
Revision: 1
Description: Library to talk to iDevices
License: Restrictive

# Dependencies:
BuildDependsOnly: true
Depends: %N1.0.6-shlibs (>= %v-%r)
BuildDepends: <<
  libplist2.0.3,
  fink-package-precedence,
  openssl110-dev,
  pkgconfig,
  usbmuxd2.0.6-dev
<<

# Unpack Phase:
Source: https://github.com/libimobiledevice/libimobiledevice/releases/download/%v/libimobiledevice-%v.tar.bz2
Source-MD5: c50a3a32acf33dc8c9ec88137ad12ec4

# Patch Phase:
#   Fix -I ordering (quick hack)
PatchFile: %n.patch
PatchFile-MD5: d8ce272a06fc8d9db47c3b9167920b99
PatchScript: <<
  %{default_script}
  # don't propagate needless BuildDepends
  perl -ni -e 'print unless /\.private/' src/libusbmuxd-2.0.pc.in
<<

ConfigureParams: CFLAGS="-I%p/include -std=gnu89" --without-cython --disable-static --disable-silent-rules
CompileScript: <<
  %{default_script}
  fink-package-precedence --prohibit-bdep=%n .
<<

DocFiles: AUTHORS COPYING* NEWS README.md

SplitOff: <<
  Package: %N1.0.6-shlibs
  Depends: <<
    libplist2.0.3-shlibs,
    openssl110-shlibs,
    usbmuxd2.0.6-shlibs
  <<

  Files: <<
    lib/libimobiledevice-1.0.6.dylib
  <<
  Shlibs: <<
    %p/lib/libimobiledevice-1.0.6.dylib 7.0.0 %n (>= 1.0.6-1)
  <<
  DocFiles: AUTHORS COPYING* NEWS README.md
<<

Splitoff2: <<
  Package: %N1.0.6-dev
  Conflicts: %N-dev, %N4-dev
  Replaces: %N-dev, %N4-dev
  Depends: %N1.0.6-shlibs (= %v-%r)
  BuildDependsOnly: true
  Files: <<
    include
    lib
  <<
  DocFiles: AUTHORS COPYING* NEWS README.md docs/html
<<

# Additional Info
DescDetail: <<
libimobiledevice is a software library that talks the protocols to support
iPhone, iPod Touch, iPad and Apple TV devices.  Unlike other projects, it
does not depend on using any existing proprietary libraries and does not
require jailbreaking.  It allows other software to easily access the
device's filesystem, retrieve information about the device and it's
internals, backup/restore the device, manage SpringBoard icons, manage
installed applications, retrieve addressbook/calendars/notes and bookmarks
and synchronize music and video to the device.

See the README file for some commandline tools to access iDevices.
<<

Homepage: http://www.libimobiledevice.org/
Maintainer: Karl-Michael Schindler <karl-michael.schindler@web.de>
