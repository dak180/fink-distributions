Info3: <<
Package: libspatialite5-shlibs
Version: 4.1.1
Revision: 7
Description: Shared libraries for libspatialite5 package
License: OSI-Approved
Homepage: http://www.gaia-gis.it/spatialite/
Maintainer: BABA Yoshihiko <babayoshihiko@mac.com>
DescDetail: <<
The SpatiaLite extension enables SQLite to support 
spatial data too [aka GEOMETRY], in a way conformant 
to OpenGIS specifications.
<<

Depends: <<
  libfreexl1-shlibs (>=1.0.2-1),
  libgeos3.6.1-shlibs,
  libiconv,
  libproj9-shlibs,
  sqlite3-shlibs
<<
BuildDepends: <<
  fink (>= 0.28),
  fink-package-precedence,
  flag-sort,
  libfreexl1-dev (>=1.0.2-1),
  libgeos3.6.1,
  libiconv-dev,
  libproj9,
  pkgconfig,
  sqlite3-dev
<<

# Unpack Phase.

Source: http://www.gaia-gis.it/gaia-sins/libspatialite-sources/libspatialite-%v.tar.gz
Source-MD5: 356e0b18de0d382e27da578dc227a7b0

SetCPPFLAGS: -Os
# Need to keep local -I first (avoids needing fragile BuildConflicts)
ConfigureParams: <<
	--target=macosx \
	CC="flag-sort gcc" \
	--disable-static \
	--with-geosconfig=%p/opt/libgeos3.6.1/bin/geos-config \
	--enable-dependency-tracking
<<

PatchScript: <<
  # Patch configure not to link like Puma on Yosemite
  perl -pi -e 's/(10\.\[012\])\*/\1\,.\*/' configure

  perl -pi -e "s|SUBDIRS = src test|SUBDIRS = src test #|g" Makefile.in

  perl -pi -e 's/(-version-info.*)/\1 -no-undefined/ unless /-no-undefined/' src/Makefile.in
<<

CompileScript: <<
#!/bin/sh -xe

  # Set up Libraries
  ./configure %c
  
  make
  fink-package-precedence --prohibit-bdep=libspatialite5 .
<<

# Install Phase.
InstallScript: <<
#!/bin/sh -xe
  # Install Libraries
  make install prefix=%i
<<
Shlibs: <<
  %p/lib/libspatialite.5.dylib  7.0.0 %n (>= 4.1.0-1)
<<
DocFiles: AUTHORS COPYING INSTALL README

SplitOff: <<
  Package: libspatialite5
  Description: GIS extensions and tools to SQLite
  Conflicts: <<
    libspatialite2,
    libspatialite7
  <<
  Replaces: <<
    libspatialite2,
    libspatialite7
  <<
  Depends: <<
    %N (=%v-%r)
  <<
  BuildDependsOnly: true
  Files: <<
    include
    lib/libspatialite.{dylib,la}
    lib/pkgconfig
  <<
  DocFiles: AUTHORS COPYING INSTALL README
# End of SplitOff
<<

# End of Info3
<<
